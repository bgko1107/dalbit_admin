<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.dalbit.broadcast.dao.B_ListenerDao" >

    <select id="callListener_detail" parameterType="com.dalbit.broadcast.vo.ListenerVo" resultType="com.dalbit.broadcast.vo.ListenerVo">
        /* B_Listener.xml - callListener_detail */
        select (select code From tbl_code_define where value = a.auth and type ='broadcast_auth')   as auth
               ,b.mem_id     as memId
               ,b.mem_nick   as memNick
               ,DATE_FORMAT(a.join_date, '%Y-%m-%d %H:%i:%s')                as listenStDate
               ,(CASE  a.auth WHEN 1 THEN '매니저' ELSE '매니저 임명' end) AS menager
         from tb_broadcast_room_member a, tb_member_basic b
         where a.mem_no = b.mem_no
           and a.room_no=#{roomNo}
    </select>

</mapper>