<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.dalbit.broadcast.dao.B_MemberDao" >

    <select id="callListener_detail" parameterType="com.dalbit.broadcast.vo.BroadcastHistroyVo" resultType="com.dalbit.broadcast.vo.BroadcastHistroyVo">
        /* M_Member.xml - callListener_detail */
        select a.room_no as roomNo
                ,(select code from tbl_code_define where value = a.auth and type='broadcast_auth') auth
                ,a.mem_no as memNo
                ,b.mem_nick as memNick
                ,a.join_date as listenStDate
                ,'' as StDate
                ,'' as EdDate
                ,(CASE  a.auth WHEN 1 THEN '매니저 임명 중' ELSE '임명하기' end) AS manager
          from tb_broadcast_room_member a, tb_member_basic b
         where a.mem_no = b.mem_no
           and room_no=#{roomNo}
    </select>

</mapper>